<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>课程列表 - AIGC学院</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0B1426 0%, #1E293B 100%);
            min-height: 100vh;
        }
        
        .glass-nav {
            background: rgba(11, 20, 38, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 212, 255, 0.2);
        }
        
        .glow-text {
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.5), 0 0 40px rgba(0, 212, 255, 0.3);
        }
        
        .skill-tree-container {
            background: rgba(30, 58, 138, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 20px;
        }
        
        .node {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .node:hover {
            transform: scale(1.1);
        }
        
        .node.completed {
            fill: #00D4FF;
        }
        
        .node.available {
            fill: #6B7280;
        }
        
        .node.locked {
            fill: #374151;
        }
        
        .link {
            stroke: rgba(0, 212, 255, 0.3);
            stroke-width: 2;
            transition: all 0.3s ease;
        }
        
        .link.active {
            stroke: #00D4FF;
            stroke-width: 3;
        }
        
        .tooltip {
            position: fixed;
            background: rgba(11, 20, 38, 0.95);
            border: 1px solid rgba(0, 212, 255, 0.5);
            border-radius: 10px;
            padding: 15px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
            max-width: 300px;
        }
        
        .tooltip.show {
            opacity: 1;
        }
        
        .progress-bar {
            background: rgba(30, 58, 138, 0.3);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #00D4FF, #0EA5E9);
            height: 100%;
            transition: width 0.5s ease;
        }
        
        .course-info {
            background: rgba(30, 58, 138, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 15px;
        }
    </style>
</head>
<body class="text-white">
    <!-- Navigation -->
    <nav class="glass-nav fixed top-0 w-full z-50 px-6 py-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="text-2xl font-bold glow-text">AIGC学院</div>
            <div class="hidden md:flex space-x-8">
                <a href="index.html" class="text-white hover:text-cyan-400 transition-colors">首页</a>
                <a href="courses.html" class="text-cyan-400">课程</a>
                <a href="about.html" class="text-white hover:text-cyan-400 transition-colors">关于我们</a>
            </div>
            <button class="md:hidden text-white">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
    </nav>
    
    <!-- Header -->
    <section class="pt-24 pb-12 px-6">
        <div class="max-w-6xl mx-auto text-center">
            <h1 class="text-5xl font-bold mb-4 glow-text">AIGC技能树</h1>
            <p class="text-xl text-gray-300 mb-8">从基础到精通，构建你的AI知识体系</p>
            <div class="flex justify-center items-center space-x-8 text-sm">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-cyan-400 rounded-full mr-2"></div>
                    <span>已完成</span>
                </div>
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-gray-500 rounded-full mr-2"></div>
                    <span>可学习</span>
                </div>
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-gray-700 rounded-full mr-2"></div>
                    <span>锁定</span>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Skill Tree Container -->
    <section class="px-6 pb-20">
        <div class="max-w-7xl mx-auto">
            <div class="skill-tree-container p-8">
                <div id="skill-tree" class="w-full" style="height: 600px;"></div>
            </div>
        </div>
    </section>
    
    <!-- Course Info Panel -->
    <div id="course-info" class="course-info fixed right-6 top-24 w-80 p-6 opacity-0 transform translate-x-full transition-all duration-300 z-40">
        <div id="course-content">
            <h3 class="text-xl font-bold mb-3 text-cyan-400" id="course-title">选择一个课程</h3>
            <p class="text-gray-300 mb-4" id="course-description">点击技能树中的节点查看课程详情</p>
            <div class="mb-4">
                <div class="flex justify-between text-sm mb-2">
                    <span>完成度</span>
                    <span id="course-progress">0%</span>
                </div>
                <div class="progress-bar h-2">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
            </div>
            <div class="mb-4">
                <div class="text-sm text-gray-400 mb-2">先修课程</div>
                <div id="prerequisites" class="text-sm">无</div>
            </div>
            <button id="start-course" class="w-full bg-cyan-500 text-white py-2 px-4 rounded-lg hover:bg-cyan-600 transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed">
                开始学习
            </button>
        </div>
    </div>
    
    <!-- Tooltip -->
    <div id="tooltip" class="tooltip">
        <div id="tooltip-content"></div>
    </div>
    
    <!-- Footer -->
    <footer class="py-12 px-6">
        <div class="max-w-4xl mx-auto text-center text-gray-400">
            © 2024 AIGC学院. 保留所有权利.
        </div>
    </footer>
    
    <script>
        // Course data structure
        const courseData = {
            nodes: [
                { id: "ai-basics", name: "AI基础", x: 400, y: 100, level: 0, completed: true, 
                  description: "人工智能入门课程，了解AI的基本概念和发展历史",
                  progress: 100, prerequisites: [] },
                
                { id: "ml-intro", name: "机器学习入门", x: 200, y: 250, level: 1, completed: true,
                  description: "学习机器学习的核心算法和应用场景",
                  progress: 100, prerequisites: ["ai-basics"] },
                
                { id: "dl-fundamentals", name: "深度学习基础", x: 600, y: 250, level: 1, completed: false,
                  description: "深入理解神经网络和深度学习原理",
                  progress: 60, prerequisites: ["ai-basics"] },
                
                { id: "nlp-basics", name: "自然语言处理", x: 100, y: 400, level: 2, completed: false,
                  description: "掌握文本处理和语言模型技术",
                  progress: 0, prerequisites: ["ml-intro"] },
                
                { id: "computer-vision", name: "计算机视觉", x: 300, y: 400, level: 2, completed: false,
                  description: "学习图像识别和处理技术",
                  progress: 0, prerequisites: ["ml-intro"] },
                
                { id: "neural-networks", name: "神经网络", x: 500, y: 400, level: 2, completed: false,
                  description: "构建和训练各种神经网络模型",
                  progress: 0, prerequisites: ["dl-fundamentals"] },
                
                { id: "gan-models", name: "生成对抗网络", x: 700, y: 400, level: 2, completed: false,
                  description: "掌握GAN原理和应用",
                  progress: 0, prerequisites: ["dl-fundamentals"] },
                
                { id: "gpt-models", name: "GPT与大语言模型", x: 200, y: 550, level: 3, completed: false,
                  description: "深入理解GPT架构和训练方法",
                  progress: 0, prerequisites: ["nlp-basics", "neural-networks"] },
                
                { id: "stable-diffusion", name: "Stable Diffusion", x: 400, y: 550, level: 3, completed: false,
                  description: "学习文本到图像生成技术",
                  progress: 0, prerequisites: ["computer-vision", "gan-models"] },
                
                { id: "ai-applications", name: "AI应用开发", x: 600, y: 550, level: 3, completed: false,
                  description: "将AI模型部署到实际应用中",
                  progress: 0, prerequisites: ["neural-networks", "gan-models"] }
            ],
            links: [
                { source: "ai-basics", target: "ml-intro" },
                { source: "ai-basics", target: "dl-fundamentals" },
                { source: "ml-intro", target: "nlp-basics" },
                { source: "ml-intro", target: "computer-vision" },
                { source: "dl-fundamentals", target: "neural-networks" },
                { source: "dl-fundamentals", target: "gan-models" },
                { source: "nlp-basics", target: "gpt-models" },
                { source: "computer-vision", target: "stable-diffusion" },
                { source: "neural-networks", target: "gpt-models" },
                { source: "neural-networks", target: "ai-applications" },
                { source: "gan-models", target: "stable-diffusion" },
                { source: "gan-models", target: "ai-applications" }
            ]
        };
        
        let selectedNode = null;
        
        // Initialize skill tree
        function initSkillTree() {
            const container = d3.select("#skill-tree");
            const width = container.node().getBoundingClientRect().width;
            const height = 600;
            
            const svg = container.append("svg")
                .attr("width", width)
                .attr("height", height);
            
            // Create links
            const links = svg.selectAll(".link")
                .data(courseData.links)
                .enter().append("line")
                .attr("class", "link")
                .attr("x1", d => courseData.nodes.find(n => n.id === d.source).x)
                .attr("y1", d => courseData.nodes.find(n => n.id === d.source).y)
                .attr("x2", d => courseData.nodes.find(n => n.id === d.target).x)
                .attr("y2", d => courseData.nodes.find(n => n.id === d.target).y);
            
            // Create nodes
            const nodes = svg.selectAll(".node")
                .data(courseData.nodes)
                .enter().append("g")
                .attr("class", "node")
                .attr("transform", d => `translate(${d.x}, ${d.y})`)
                .style("cursor", "pointer");
            
            // Add circles
            nodes.append("circle")
                .attr("r", 25)
                .attr("class", d => {
                    if (d.completed) return "completed";
                    if (d.prerequisites.every(prereq => 
                        courseData.nodes.find(n => n.id === prereq).completed)) {
                        return "available";
                    }
                    return "locked";
                })
                .style("fill", d => {
                    if (d.completed) return "#00D4FF";
                    if (d.prerequisites.every(prereq => 
                        courseData.nodes.find(n => n.id === prereq).completed)) {
                        return "#6B7280";
                    }
                    return "#374151";
                })
                .style("stroke", "#00D4FF")
                .style("stroke-width", 2);
            
            // Add text
            nodes.append("text")
                .attr("text-anchor", "middle")
                .attr("dy", ".35em")
                .style("fill", "white")
                .style("font-size", "10px")
                .style("font-weight", "bold")
                .text(d => d.name.length > 6 ? d.name.substring(0, 6) + "..." : d.name);
            
            // Add click handlers
            nodes.on("click", function(event, d) {
                selectNode(d);
                event.stopPropagation();
            });
            
            // Add hover effects
            nodes.on("mouseenter", function(event, d) {
                showTooltip(event, d);
                highlightPath(d);
            });
            
            nodes.on("mouseleave", function() {
                hideTooltip();
                unhighlightPath();
            });
        }
        
        function selectNode(node) {
            selectedNode = node;
            
            // Update course info panel
            document.getElementById('course-title').textContent = node.name;
            document.getElementById('course-description').textContent = node.description;
            document.getElementById('course-progress').textContent = node.progress + '%';
            document.getElementById('progress-fill').style.width = node.progress + '%';
            
            // Update prerequisites
            const prereqsElement = document.getElementById('prerequisites');
            if (node.prerequisites.length === 0) {
                prereqsElement.textContent = '无';
            } else {
                const prereqNames = node.prerequisites.map(prereq => 
                    courseData.nodes.find(n => n.id === prereq).name
                );
                prereqsElement.textContent = prereqNames.join(', ');
            }
            
            // Update start button
            const startButton = document.getElementById('start-course');
            const isAvailable = node.prerequisites.every(prereq => 
                courseData.nodes.find(n => n.id === prereq).completed
            );
            
            if (isAvailable) {
                startButton.disabled = false;
                startButton.textContent = node.completed ? '复习课程' : '开始学习';
                startButton.onclick = () => {
                    window.location.href = `course-detail.html?course=${node.id}`;
                };
            } else {
                startButton.disabled = true;
                startButton.textContent = '请先完成前置课程';
            }
            
            // Show course info panel
            const infoPanel = document.getElementById('course-info');
            infoPanel.classList.remove('opacity-0', 'translate-x-full');
            infoPanel.classList.add('opacity-100', 'translate-x-0');
        }
        
        function showTooltip(event, d) {
            const tooltip = document.getElementById('tooltip');
            const content = document.getElementById('tooltip-content');
            
            content.innerHTML = `
                <div class="font-bold text-cyan-400 mb-2">${d.name}</div>
                <div class="text-sm text-gray-300 mb-2">${d.description}</div>
                <div class="text-xs text-gray-400">进度: ${d.progress}%</div>
            `;
            
            tooltip.style.left = event.clientX + 10 + 'px';
            tooltip.style.top = event.clientY - 10 + 'px';
            tooltip.classList.add('show');
        }
        
        function hideTooltip() {
            document.getElementById('tooltip').classList.remove('show');
        }
        
        function highlightPath(node) {
            // Highlight links connected to this node
            d3.selectAll('.link')
                .classed('active', d => d.source === node.id || d.target === node.id);
        }
        
        function unhighlightPath() {
            d3.selectAll('.link').classed('active', false);
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initSkillTree();
            
            // Hide course info panel when clicking outside
            document.addEventListener('click', function(event) {
                const infoPanel = document.getElementById('course-info');
                const skillTree = document.getElementById('skill-tree');
                
                if (!infoPanel.contains(event.target) && !skillTree.contains(event.target)) {
                    infoPanel.classList.add('opacity-0', 'translate-x-full');
                    infoPanel.classList.remove('opacity-100', 'translate-x-0');
                    selectedNode = null;
                }
            });
        });
    </script>
</body>
</html>